(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7044)}])},7044:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return f}});var t=n(5893),a=n(2224),o=n.n(a),r=n(3488),s=n.n(r);let i=e=>{let{isStart:l,isGoal:n}=e;return(0,t.jsxs)("div",{children:[l&&(0,t.jsxs)("div",{className:s().start,children:["start",(0,t.jsx)("br",{}),(0,t.jsx)("br",{})]}),n&&(0,t.jsxs)("div",{className:s().goal,children:[(0,t.jsx)("br",{}),"goal"]})]})},c=e=>{let{cell:l,isHuman:n,arrowRotation:a,isStart:r,isGoal:s}=e;return(0,t.jsxs)("div",{className:o().cell,children:[1===l&&(0,t.jsx)("div",{className:o().pillar}),n&&(0,t.jsx)("div",{className:"".concat(o().position," ").concat(r||s?o().humananimation:""),children:(0,t.jsx)("div",{className:o().arrow,style:{transform:"rotate(".concat(a,"deg)")}})}),(0,t.jsx)(i,{isStart:r,isGoal:s})]})};var u=n(7294);let _=()=>{let e=Array.from({length:31},()=>Array(31).fill(0)),[l,n]=(0,u.useState)(e),t={x:0,y:0,front:[1,0]},[a,o]=(0,u.useState)(t),r=[[0,1],[1,0],[0,-1],[-1,0]],s=()=>{let e=[];for(let n=0;n<l.length;n++)for(let t=0;t<l[n].length;t++)n%2==1&&t%2==1&&e.push([t,n]);return console.log("xy座標奇数マスを1にする↓"),console.table(l),e},i=()=>{let i=s(),c=JSON.parse(JSON.stringify(e));for(let e of i){let[l,n]=e,t=Math.floor(4*Math.random()),a=r[t],[o,s]=a,i=n+s,u=l+o;c[u][i]=1,c[l][n]=1}n(c),o(t),p(!1),console.log("迷路盤↓"),console.table(l),console.log("front"),console.log(a)},c=(e,l,n)=>{let[t,a]=n,o=[0,0],r=e;return 1===t?o=[a,t]:1===a?o=[-a,t]:-1===t?o=[a,t]:-1===a&&(o=[-a,t]),{newX:e+o[0],newY:l+o[1],newFront:o}},_=(0,u.useCallback)(()=>{let{x:e,y:l,front:n}=a,{newX:t,newY:r,newFront:s}=c(e,l,n);o({x:t,y:r,front:s})},[a]),h=(0,u.useCallback)(()=>{let{x:e,y:l,front:n}=a,[t,r]=n;o({...a,x:e+t,y:l+r})},[a]),x=(0,u.useCallback)(()=>{let{front:e}=a,[l,n]=e,t=[0,0];-1===n?t=[n,l]:-1===l?t=[n,-l]:1===n?t=[n,l]:1===l&&(t=[n,-l]),o({...a,front:t})},[a]),d=(e,l,n)=>e>=0&&e<n.length&&l>=0&&l<n[0].length&&0===n[e][l],f=(0,u.useCallback)(()=>{let{x:e,y:n,front:t}=a;if(e===l.length-1&&n===l[0].length-1){alert("goal!"),p(!1);return}let{newX:o,newY:r}=c(e,n,t),s=e+t[0],i=n+t[1];d(o,r,l)?(_(),console.log("leftmove実行")):d(s,i,l)?(h(),console.log("goMove実行")):(x(),console.log("turnright実行"))},[l,a,_,h,x]),m=(e,l)=>{let n="".concat(e,",").concat(l);return({"1,0":270,"0,-1":0,"-1,0":90,"0,1":180})[n]||0},[g,p]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{if(g){let e=setInterval(()=>{f(),a.x===l.length-1&&a.y===l[0].length-1&&p(!1)},35);return()=>{clearInterval(e)}}},[g,a.x,a.y,l,f]),{generationMazeBoard:i,moveHuman:f,setSearching:p,maze:l,getArrowRotation:m,human:a}};var h=n(2729),x=n.n(h);let d=()=>{let{maze:e,human:l,generationMazeBoard:n,moveHuman:a,setSearching:o,getArrowRotation:r}=_();return(0,t.jsxs)("div",{className:x().container,children:[(0,t.jsx)("h1",{children:"迷路ゲーム"}),(0,t.jsxs)("div",{className:x().top,children:[(0,t.jsx)("button",{className:x().generationbu,onClick:n,children:"生成"}),(0,t.jsx)("button",{className:x().humanbu,onClick:a,children:"探索"}),(0,t.jsx)("button",{className:x().flowbu,onClick:()=>o(!0),children:"auto探索"}),(0,t.jsx)("div",{className:x().space})]}),(0,t.jsx)("div",{className:x().maze,children:e.map((n,a)=>n.map((n,o)=>(0,t.jsx)(c,{cell:n,isHuman:l.x===a&&l.y===o,arrowRotation:r(l.front[0],l.front[1]),isStart:0===a&&0===o,isGoal:a===e.length-1&&o===e[0].length-1},"".concat(a,"-").concat(o))))}),(0,t.jsx)("div",{className:x().space})]})};var f=d},2224:function(e){e.exports={cell:"MazeCell_cell__UzaA5",pillar:"MazeCell_pillar__wRCu0",position:"MazeCell_position__yjyur",humananimation:"MazeCell_humananimation__IKE2h",runanimation:"MazeCell_runanimation__33ZBP",arrow:"MazeCell_arrow__grlMr"}},3488:function(e){e.exports={start:"StartGoal_start__MWhTU",goal:"StartGoal_goal__KWFUU"}},2729:function(e){e.exports={container:"index_container__gnN1f",maze:"index_maze__HlHhr",top:"index_top__uMqHF",generationbu:"index_generationbu__j3I9R",humanbu:"index_humanbu__yKQMU",flowbu:"index_flowbu__ywwwD",space:"index_space__LhpGr"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);