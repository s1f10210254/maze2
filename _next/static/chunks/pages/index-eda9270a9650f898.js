(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(481)}])},481:function(e,l,n){"use strict";n.r(l),n.d(l,{default:function(){return f}});var t=n(5893),o=n(2224),a=n.n(o);let r=e=>{let{cell:l,isHuman:n,arrowRotation:o}=e;return(0,t.jsxs)("div",{className:a().cell,children:[1===l&&(0,t.jsx)("div",{className:a().pillar}),n&&(0,t.jsx)("div",{className:a().position,children:(0,t.jsx)("div",{className:a().arrow,style:{transform:"rotate(".concat(o,"deg)")}})})]})};var s=n(7294);let c=()=>{let e=Array.from({length:31},()=>Array(31).fill(0)),[l,n]=(0,s.useState)(e),t={x:0,y:0,front:[1,0]},[o,a]=(0,s.useState)(t),r=[[0,1],[1,0],[0,-1],[-1,0]],c=()=>{let e=[];for(let n=0;n<l.length;n++)for(let t=0;t<l[n].length;t++)n%2==1&&t%2==1&&e.push([t,n]);return console.log("xy座標奇数マスを1にする↓"),console.table(l),e},i=()=>{let s=c(),i=JSON.parse(JSON.stringify(e));for(let e of s){let[l,n]=e,t=Math.floor(4*Math.random()),o=r[t],[a,s]=o,c=n+s,u=l+a;i[u][c]=1,i[l][n]=1}n(i),a(t),b(!1),console.log("迷路盤↓"),console.table(l),console.log("front"),console.log(o)},u=(e,l,n)=>{let[t,o]=n,a=[0,0],r=e;return 1===t?a=[o,t]:1===o?a=[-o,t]:-1===t?a=[o,t]:-1===o&&(a=[-o,t]),{newX:e+a[0],newY:l+a[1],newFront:a}},_=(0,s.useCallback)(()=>{let{x:e,y:l,front:n}=o,{newX:t,newY:r,newFront:s}=u(e,l,n);a({x:t,y:r,front:s})},[o]),f=(0,s.useCallback)(()=>{let{x:e,y:l,front:n}=o,[t,r]=n;a({...o,x:e+t,y:l+r})},[o]),d=(0,s.useCallback)(()=>{let{front:e}=o,[l,n]=e,t=[0,0];-1===n?t=[n,l]:-1===l?t=[n,-l]:1===n?t=[n,l]:1===l&&(t=[n,-l]),a({...o,front:t})},[o]),h=(e,l,n)=>e>=0&&e<n.length&&l>=0&&l<n[0].length&&0===n[e][l],x=(0,s.useCallback)(()=>{let{x:e,y:n,front:t}=o;if(e===l.length-1&&n===l[0].length-1){alert("goal!"),b(!1);return}let{newX:a,newY:r}=u(e,n,t),s=e+t[0],c=n+t[1];h(a,r,l)?(_(),console.log("leftmove実行")):h(s,c,l)?(f(),console.log("goMove実行")):(d(),console.log("turnright実行"))},[l,o,_,f,d]),g=(e,l)=>{let n="".concat(e,",").concat(l);return({"1,0":270,"0,-1":0,"-1,0":90,"0,1":180})[n]||0},[m,b]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(m){let e=setInterval(()=>{x(),o.x===l.length-1&&o.y===l[0].length-1&&b(!1)},50);return()=>{clearInterval(e)}}},[m,o.x,o.y,l,x]),{generationMazeBoard:i,moveHuman:x,setSearching:b,maze:l,getArrowRotation:g,human:o}};var i=n(2729),u=n.n(i);let _=()=>{let{maze:e,human:l,generationMazeBoard:n,moveHuman:o,setSearching:a,getArrowRotation:s}=c();return(0,t.jsxs)("div",{className:u().container,children:[(0,t.jsx)("h1",{children:"迷路ゲーム"}),(0,t.jsxs)("div",{className:u().top,children:[(0,t.jsx)("button",{className:u().generationbu,onClick:n,children:"生成"}),(0,t.jsx)("button",{className:u().humanbu,onClick:o,children:"探索"}),(0,t.jsx)("button",{className:u().flowbu,onClick:()=>a(!0),children:"auto探索"})]}),(0,t.jsx)("div",{className:u().maze,children:e.map((e,n)=>e.map((e,o)=>(0,t.jsx)(r,{cell:e,isHuman:l.x===n&&l.y===o,arrowRotation:s(l.front[0],l.front[1])},"".concat(n,"-").concat(o))))})]})};var f=_},2224:function(e){e.exports={cell:"MazeCell_cell__UzaA5",pillar:"MazeCell_pillar__wRCu0",position:"MazeCell_position__yjyur",arrow:"MazeCell_arrow__grlMr"}},2729:function(e){e.exports={container:"index_container__gnN1f",maze:"index_maze__HlHhr",start:"index_start__OPMpd",goal:"index_goal__JD3y_",top:"index_top__uMqHF",generationbu:"index_generationbu__j3I9R",humanbu:"index_humanbu__yKQMU",flowbu:"index_flowbu__ywwwD"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);