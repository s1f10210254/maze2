(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7044)}])},7044:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return d}});var n=t(5893),a=t(2224),r=t.n(a),o=t(3488),s=t.n(o);let c=e=>{let{isStart:l,isGoal:t}=e;return(0,n.jsxs)("div",{children:[l&&(0,n.jsxs)("div",{className:s().start,children:["start",(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]}),t&&(0,n.jsxs)("div",{className:s().goal,children:[(0,n.jsx)("br",{}),"goal"]})]})},i=e=>{let{cell:l,isHuman:t,arrowRotation:a,isStart:o,isGoal:s}=e;return(0,n.jsxs)("div",{className:r().cell,children:[1===l&&(0,n.jsx)("div",{className:r().pillar}),t&&(0,n.jsx)("div",{className:r().position,children:(0,n.jsx)("div",{className:r().arrow,style:{transform:"rotate(".concat(a,"deg)")}})}),(0,n.jsx)(c,{isStart:o,isGoal:s})]})};var u=t(7294);let _=()=>{let e=Array.from({length:31},()=>Array(31).fill(0)),[l,t]=(0,u.useState)(e),n={x:0,y:0,front:[1,0]},[a,r]=(0,u.useState)(n),o=[[0,1],[1,0],[0,-1],[-1,0]],s=()=>{let e=[];for(let t=0;t<l.length;t++)for(let n=0;n<l[t].length;n++)t%2==1&&n%2==1&&e.push([n,t]);return console.log("xy座標奇数マスを1にする↓"),console.table(l),e},c=()=>{let c=s(),i=JSON.parse(JSON.stringify(e));for(let e of c){let[l,t]=e,n=Math.floor(4*Math.random()),a=o[n],[r,s]=a,c=t+s,u=l+r;i[u][c]=1,i[l][t]=1}t(i),r(n),b(!1),console.log("迷路盤↓"),console.table(l),console.log("front"),console.log(a)},i=(e,l,t)=>{let[n,a]=t,r=[0,0],o=e;return 1===n?r=[a,n]:1===a?r=[-a,n]:-1===n?r=[a,n]:-1===a&&(r=[-a,n]),{newX:e+r[0],newY:l+r[1],newFront:r}},_=(0,u.useCallback)(()=>{let{x:e,y:l,front:t}=a,{newX:n,newY:o,newFront:s}=i(e,l,t);r({x:n,y:o,front:s})},[a]),h=(0,u.useCallback)(()=>{let{x:e,y:l,front:t}=a,[n,o]=t;r({...a,x:e+n,y:l+o})},[a]),f=(0,u.useCallback)(()=>{let{front:e}=a,[l,t]=e,n=[0,0];-1===t?n=[t,l]:-1===l?n=[t,-l]:1===t?n=[t,l]:1===l&&(n=[t,-l]),r({...a,front:n})},[a]),x=(e,l,t)=>e>=0&&e<t.length&&l>=0&&l<t[0].length&&0===t[e][l],d=(0,u.useCallback)(()=>{let{x:e,y:t,front:n}=a;if(e===l.length-1&&t===l[0].length-1){alert("goal!"),b(!1);return}let{newX:r,newY:o}=i(e,t,n),s=e+n[0],c=t+n[1];x(r,o,l)?(_(),console.log("leftmove実行")):x(s,c,l)?(h(),console.log("goMove実行")):(f(),console.log("turnright実行"))},[l,a,_,h,f]),g=(e,l)=>{let t="".concat(e,",").concat(l);return({"1,0":270,"0,-1":0,"-1,0":90,"0,1":180})[t]||0},[m,b]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{if(m){let e=setInterval(()=>{d(),a.x===l.length-1&&a.y===l[0].length-1&&b(!1)},35);return()=>{clearInterval(e)}}},[m,a.x,a.y,l,d]),{generationMazeBoard:c,moveHuman:d,setSearching:b,maze:l,getArrowRotation:g,human:a}};var h=t(2729),f=t.n(h);let x=()=>{let{maze:e,human:l,generationMazeBoard:t,moveHuman:a,setSearching:r,getArrowRotation:o}=_();return(0,n.jsxs)("div",{className:f().container,children:[(0,n.jsx)("h1",{children:"迷路ゲーム"}),(0,n.jsxs)("div",{className:f().top,children:[(0,n.jsx)("button",{className:f().generationbu,onClick:t,children:"生成"}),(0,n.jsx)("button",{className:f().humanbu,onClick:a,children:"探索"}),(0,n.jsx)("button",{className:f().flowbu,onClick:()=>r(!0),children:"auto探索"})]}),(0,n.jsx)("div",{className:f().maze,children:e.map((t,a)=>t.map((t,r)=>(0,n.jsx)(i,{cell:t,isHuman:l.x===a&&l.y===r,arrowRotation:o(l.front[0],l.front[1]),isStart:0===a&&0===r,isGoal:a===e.length-1&&r===e[0].length-1},"".concat(a,"-").concat(r))))})]})};var d=x},2224:function(e){e.exports={cell:"MazeCell_cell__UzaA5",pillar:"MazeCell_pillar__wRCu0",position:"MazeCell_position__yjyur",arrow:"MazeCell_arrow__grlMr"}},3488:function(e){e.exports={start:"StartGoal_start__MWhTU",goal:"StartGoal_goal__KWFUU"}},2729:function(e){e.exports={container:"index_container__gnN1f",maze:"index_maze__HlHhr",top:"index_top__uMqHF",generationbu:"index_generationbu__j3I9R",humanbu:"index_humanbu__yKQMU",flowbu:"index_flowbu__ywwwD"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);